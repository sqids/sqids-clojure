#!/usr/bin/env bash

set -euxfo pipefail

if [ -n "${IN_BIN_CLJ_KONDO+1}" ]; then
  : "Detected recursive call to bin/clj-kondo, exiting"
  exit 1
fi

export IN_BIN_CLJ_KONDO
IN_BIN_CLJ_KONDO=1

if command -v clj-kondo >/dev/null; then
  clj-kondo "$@"
else
  clojure -M:clj-kondo "$@"
fi
